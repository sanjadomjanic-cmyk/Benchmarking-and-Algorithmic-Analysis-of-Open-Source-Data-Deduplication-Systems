/*
iostat set-up guide
I started with Debian distro so this is a guide for it
RHEL-based distros, needed for VDO would use dnf for installation, not apt
Sources:
https://tecadmin.net/iostat-command-in-linux/
*/

sudo apt-get install sysstat

//use-case-general

iostat [options] [devices] [interval] [count]


//specific for sda storage device with cpu and data info, in human-readable form



iostat -cdh sda


//niche use case for the project
//reboot and type the following after the end of dedup and you get avg. from reboot onwards


iostat -yh


//final version of a command, used in the project
//writes output to a .txt file, executing the command every 2 seconds


iostat -cdh sda 2 > sample.txt


//SAMPLE OUTPUT

avg-cpu:  %user   %nice %system %iowait  %steal   %idle
           3.3%    0.1%    8.5%    0.1%    0.0%   88.0%

      tps    kB_read/s    kB_wrtn/s    kB_dscd/s    kB_read    kB_wrtn    kB_dscd Device
     1.94       118.8k         6.7k         0.0k     784.0M      44.4M       0.0k sda


avg-cpu:  %user   %nice %system %iowait  %steal   %idle
           0.1%    0.0%    1.3%    7.3%    0.0%   91.3%

      tps    kB_read/s    kB_wrtn/s    kB_dscd/s    kB_read    kB_wrtn    kB_dscd Device
   594.50        37.1M        48.8k         0.0k      74.1M      97.5k       0.0k sda


avg-cpu:  %user   %nice %system %iowait  %steal   %idle
           0.0%    0.0%    1.4%    7.0%    0.0%   91.6%

      tps    kB_read/s    kB_wrtn/s    kB_dscd/s    kB_read    kB_wrtn    kB_dscd Device
   604.00        37.8M         0.0k         0.0k      75.5M       0.0k       0.0k sda




/*VDO
set-up:
1. locate available disks with lsblk
2. zoom in on 'sda' disk with general sudo fdisk -l command
3. calculate storage and memory needed for a vdo

storage and memory requirements for a dense index type:

... storage space = VDO metadata + UDS dedup index --> approx. 2.5 GB disk usage + 4-5 GB for dense index storage
... slab size: 2 GB (100-1000 GB range)
... RAM requir ed: min. 250 + (370 + 1 * 268) MB = 888 MB //1 is because we have 1 TB or less
... 1 GB RAM --> 1 TB dedup window (for dense index)

Software needed: LVM and Python (2.7 was mentioned but probably python3 works fine)

ISSUES: debian linux distro and vdo needs RHEL or RHEL-based distro... so I needed to download a new .iso file for AlmaLinux 10.1 which did not find kmod-kvdo so went to AlmaLinux 8, which supposedly has it but I do not know yet.

Sources:
- https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/8/html/deduplicating_and_compressing_storage/deploying-vdo_deduplicating-and-compressing-storage

TO BE CONTINUED
*/



